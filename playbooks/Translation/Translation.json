{
  "name": "19be7b8b-c4c6-4305-ae9c-04bec65ba43e",
  "displayName": "Translation",
  "goal": "Translates content",
  "inputParameterDefinitions": [ {
    "name": "current_page_url",
    "description": "The full URL of the webpage the user is currently viewing. This is passed from the client application.",
    "typeSchema": {
      "inlineSchema": {
        "type": "STRING"
      }
    },
    "parameterType": {
      "name": "current_page_url",
      "openapiJsonSchema": {
        "type": "string"
      }
    }
  }, {
    "name": "last_translated_url",
    "description": "The URL of the page that was most recently translated successfully in this session. Used to prevent duplicate processing.",
    "typeSchema": {
      "inlineSchema": {
        "type": "STRING"
      }
    },
    "parameterType": {
      "name": "last_translated_url",
      "openapiJsonSchema": {
        "type": "string"
      }
    }
  }, {
    "name": "target_language",
    "description": "The desired output language is explicitly requested by the user (e.g., \"Spanish\", \"French\"). If not stated, infer from context or leave empty.",
    "typeSchema": {
      "inlineSchema": {
        "type": "STRING"
      }
    },
    "parameterType": {
      "name": "target_language",
      "openapiJsonSchema": {
        "type": "string"
      }
    }
  } ],
  "tokenCount": 404,
  "referencedTools": [ "knowledge_retrieval_tool" ],
  "instruction": {
    "steps": [ {
      "text": "### Playbook Instructions: Translation\n\n**1. ANALYZE AND DETECT**\n* **Identify Target Language:** Determine the user's desired output language (e.g., Spanish, French, Arabic).\n    * If the user does not specify a language, infer it from the conversation context or ask for clarification.\n    * If the context implies English, treat English as the target.\n* **Identify Intent:** Determine if the user is asking to:\n    * **A:** Translate the current webpage (e.g., \"translate this page\").\n    * **B:** Translate the previous conversation or ask a new question in a different language.\n\n**2. PATH A: URL TRANSLATION**\nIf the user asks to \"translate this page\" or similar:\n*Inform the user to use the translation dropdown in the page header.\n\n**3. PATH B: CONVERSATION OR NEW QUESTION**\nIf the user is asking to translate a response\n* **Scenario 1: Translating Previous Response**\n    * Retrieve the last agent message from history and translate it into the **[Target Language]**.\n* **Scenario 2: Answering a New Question in a different language**\n    * **Search:** Formulate a search query in **ENGLISH** to find facts in the Data Store (this ensures higher accuracy).\n    * **Synthesize:** Generate the answer based on the English search results.\n    * **Translate:** Translate the final synthesized answer into the **[Target Language]**.\n    * **Constraint:** Do NOT search the Data Store for localized phrases like \"Spanish version of...\". Search for facts, then translate.\n\n**4. FORMAT AND FINALIZE**\n* **Formatting:** Ensure the final output maintains professional formatting (bullet points, bold text, headers) appropriate for the **[Target Language]**.\n* **Next Step:** End the response with the prompt: \"Can I help you with anything else?\""
    } ]
  },
  "playbookType": "ROUTINE",
  "codeBlock": {
  
  }
}
